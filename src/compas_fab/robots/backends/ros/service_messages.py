from compas.robots.model.geometry import SCALE_FACTOR

from compas_fab.robots.backends.ros.messages import ROSmsg
from compas_fab.robots.backends.ros.messages import Header
from compas_fab.robots.backends.ros.messages import Pose
from compas_fab.robots.backends.ros.messages import JointState
from compas_fab.robots.backends.ros.messages import MultiDOFJointState
from compas_fab.robots.backends.ros.messages import Constraints
from compas_fab.robots.backends.ros.messages import RobotState
from compas_fab.robots.backends.ros.messages import PoseStamped
from compas_fab.robots.backends.ros.messages import MoveItErrorCodes
from compas_fab.robots.backends.ros.messages import RobotTrajectory
from compas_fab.robots.backends.ros.messages import PositionIKRequest

class GetPositionIKRequest(ROSmsg):
    """http://docs.ros.org/melodic/api/moveit_msgs/html/srv/GetPositionIK.html
    """
    def __init__(self, ik_request=PositionIKRequest()):
        self.ik_request = ik_request

class GetPositionIKResponse(ROSmsg):
    """http://docs.ros.org/melodic/api/moveit_msgs/html/srv/GetPositionIK.html
    """
    def __init__(self, solution=RobotState(), error_code=MoveItErrorCodes()):
        self.solution = solution # moveit_msgs/RobotState
        self.error_code = error_code # moveit_msgs/MoveItErrorCodes 
    
    @classmethod
    def from_msg(cls, msg):
        solution = RobotState.from_msg(msg['solution'])
        error_code = MoveItErrorCodes.from_msg(msg['error_code'])
        return cls(solution, error_code)

class GetCartesianPathRequest(ROSmsg):
    """http://docs.ros.org/melodic/api/moveit_msgs/html/srv/GetCartesianPath.html
    """
    def __init__(self, header=Header(), start_state=RobotState(), group_name='',
                 link_name='', waypoints=[], max_step=10.,
                 jump_threshold=0., avoid_collisions=True,
                 constraints=Constraints()):
        self.header = header
        self.start_state = start_state # moveit_msgs/RobotState
        self.group_name = group_name
        self.link_name = link_name #ee_link
        self.waypoints = waypoints #geometry_msgs/Pose[]
        self._max_step = None
        self.max_step = max_step
        self.jump_threshold = jump_threshold
        self.avoid_collisions = avoid_collisions
        self.path_constraints = constraints # moveit_msgs/Constraints 

    @property
    def max_step(self):
        return self._max_step

    @max_step.setter
    def max_step(self, value):
        self._max_step = value/SCALE_FACTOR
    
class GetCartesianPathResponse(ROSmsg):
    """http://docs.ros.org/melodic/api/moveit_msgs/html/srv/GetCartesianPath.html
    """
    def __init__(self, start_state=RobotState(), solution=RobotTrajectory(),
                 fraction=0., error_code=MoveItErrorCodes()):
        self.start_state = start_state # moveit_msgs/RobotState
        self.solution = solution # moveit_msgs/RobotTrajectory 
        self.fraction = fraction
        self.error_code = error_code # moveit_msgs/MoveItErrorCodes 
    
    @classmethod
    def from_msg(cls, msg):
        start_state = RobotState.from_msg(msg['start_state'])
        solution = RobotTrajectory.from_msg(msg['solution'])
        error_code = MoveItErrorCodes.from_msg(msg['error_code'])
        return cls(start_state, solution, msg['fraction'], error_code)

"""
if robot:

    ee_link = robot.get_end_effector_link_name()
    base_link = robot.get_base_link_name()
    
    print robot.main_planning_group
    
    
    joint_names = robot.get_joint_state_names()
    
    # get current
    position = [-4.269087479231366, 4.977555542330861, 4.444879905599667, 0.0023417451091316249, 2.698291224344191, -7.7904616441518658e-07]
    
    
    header = Header(base_link)
    joint_state = JointState.from_name_and_position(joint_names, position)
    joint_state.header = header
    
    multi_dof_joint_state = MultiDOFJointState(header, joint_names)
    
    start_state = RobotState(joint_state, multi_dof_joint_state)
    
    reqmsg = {}
    reqmsg['header'] = header.msg
    reqmsg['start_state'] = start_state.msg
    reqmsg['group_name'] = robot.main_planning_group
    reqmsg['link_name'] = ee_link
    
    start_pose = Pose(start_plane.Origin, start_plane.XAxis, start_plane.YAxis)
    end_pose = Pose(end_plane.Origin, end_plane.XAxis, end_plane.YAxis)
    waypoints = []
    waypoints.append(start_pose.msg)
    waypoints.append(end_pose.msg)
    reqmsg['waypoints'] = waypoints
    reqmsg['max_step'] = 0.01
    reqmsg['jump_threshold'] = 0.
    reqmsg['avoid_collisions'] = False
    
    
    constraints = {}
    constraints['name'] = ''
    constraints['joint_constraints'] = []
    constraints['position_constraints'] = []
    constraints['orientation_constraints'] = []
    constraints['visibility_constraints'] = []
    
    # Specify additional constraints to be met by the Cartesian path
    reqmsg['path_constraints'] = constraints
    
    print reqmsg
    
    reqmsg = [reqmsg]
"""

if __name__ == '__main__':
    
    # PositionIKRequest
    base_link = 'base_link'
    planning_group = 'manipulator'
    pose = Pose([420, -25, 459], [1, 0, 0], [0, 1, 0])
    joint_names = ['shoulder_pan_joint', 'shoulder_lift_joint', 'elbow_joint', 
                   'wrist_1_joint', 'wrist_2_joint', 'wrist_3_joint']
    joint_positions = [3.39, -1.47, -2.05, 0.38, -4.96, -6.28]

    header = Header(frame_id='base_link')
    pose_stamped = PoseStamped(header, pose)
    joint_state = JointState(name=joint_names, position=joint_positions, header=header)
    multi_dof_joint_state = MultiDOFJointState(header=header, joint_names=joint_names)
    start_state = RobotState(joint_state, multi_dof_joint_state)
    ik_request = PositionIKRequest(group_name=planning_group, robot_state=start_state, pose_stamped=pose_stamped, avoid_collisions=True)
    print(ik_request)

    get_cartesian_path = GetCartesianPathRequest()
    print(get_cartesian_path)

    msg = {'start_state': {'attached_collision_objects': [], 'multi_dof_joint_state': {'wrench': [], 'twist': [], 'transforms': [], 'header': {'seq': 0, 'frame_id': '/world', 'stamp': {'nsecs': 0, 'secs': 0}}, 'joint_names': []}, 'joint_state': {'velocity': [], 'effort': [], 'name': ['shoulder_pan_joint', 'shoulder_lift_joint', 'elbow_joint', 'wrist_1_joint', 'wrist_2_joint', 'wrist_3_joint'], 'position': [-4.259955544123728, 4.261436668405658, 3.8223996232037525, 1.3409416727489272, 2.6891592191254503, -3.3082180251513618e-13], 'header': {'seq': 0, 'frame_id': '/world', 'stamp': {'nsecs': 0, 'secs': 0}}}, 'is_diff': False}, 'fraction': 1.0, 'error_code': {'val': 1}, 'solution': {'multi_dof_joint_trajectory': {'joint_names': [], 'header': {'seq': 0, 'frame_id': '', 'stamp': {'nsecs': 0, 'secs': 0}}, 'points': []}, 'joint_trajectory': {'joint_names': ['shoulder_pan_joint', 'shoulder_lift_joint', 'elbow_joint', 'wrist_1_joint', 'wrist_2_joint', 'wrist_3_joint'], 'header': {'seq': 0, 'frame_id': '/world', 'stamp': {'nsecs': 0, 'secs': 0}}, 'points': [{'accelerations': [0.38780697728383151, 0.0, 0.0, 0.0, 0.0, 0.0], 'effort': [], 'velocities': [0.0, 0.0, 0.0, 0.0, 0.0, 0.0], 'positions': [-4.269087479231366, 4.977555542330861, 4.444879905599667, 0.0023417451091316249, 2.698291224344191, -7.7904616441518658e-07], 'time_from_start': {'nsecs': 0, 'secs': 0}}, {'accelerations': [0.44430917336259346, 0.63486841973577091, -0.41708054660730182, -0.21778575671442613, -0.44430898296708565, 3.1506914990874417], 'effort': [], 'velocities': [0.10192998894210485, 0.15423602932648442, -0.10538894305557307, -0.048846565840593936, -0.10192991072576166, 0.77328988951757105], 'positions': [-4.252697774287638, 5.003471823433513, 4.426672902597312, -0.0053674447745237714, 2.6819015364648733, 0.1308990068010962], 'time_from_start': {'nsecs': 290731946, 'secs': 0}}, {'accelerations': [0.53236895584987598, 0.61596927939803203, -0.34327234157580439, -0.27269519953942739, -0.53236909634391116, 2.9303012064166545], 'effort': [], 'velocities': [0.17575441838665712, 0.25203805277847158, -0.16638067447904892, -0.085656548566793569, -0.17575432810874528, 1.251934322146286], 'positions': [-4.235088334660256, 5.029659307323225, 4.408983808251696, -0.013865746271306651, 2.6642921085071523, 0.26179879126081479], 'time_from_start': {'nsecs': 410129278, 'secs': 0}}, {'accelerations': [0.65100647455006344, 0.63974223235171879, -0.30698633892368954, -0.33275446836220007, -0.65100690351162327, 2.9301359587319884], 'effort': [], 'velocities': [0.23199744235620198, 0.31223614917738662, -0.19779979569380049, -0.11443537021244546, -0.23199737797148356, 1.5334430240041885], 'positions': [-4.216114302299017, 5.056140520393912, 4.391815327906727, -0.023178393248250131, 2.6453180838479318, 0.39269857276063486], 'time_from_start': {'nsecs': 503128848, 'secs': 0}}, {'accelerations': [0.82207371863554057, 0.70053773243310791, -0.29029278678106263, -0.41024388316591609, -0.82207444038568778, 3.092384370201314], 'effort': [], 'velocities': [0.29042993083907453, 0.36568168752993424, -0.22174677359527326, -0.14393383006135191, -0.29042991162827902, 1.7739278891876364], 'positions': [-4.195606160078732, 5.082940184400647, 4.375171071492764, -0.033333718444013463, 2.624809945252586, 0.5235983502776459], 'time_from_start': {'nsecs': 582014787, 'secs': 0}}, {'accelerations': [0.92196511088784727, 0.6429875354109813, -0.20140436585787899, -0.44158290665336758, -0.92196610557528869, 2.6667219802466646], 'effort': [], 'velocities': [0.35147184207372778, 0.41296625058733261, -0.23918325136165203, -0.17378186726615158, -0.35147188260024931, 1.976963132089067], 'positions': [-4.173364105867136, 5.11008613276249, 4.359055390887527, -0.044363908344334055, 2.60256789051905, 0.65449812268546714], 'time_from_start': {'nsecs': 651328909, 'secs': 0}}, {'accelerations': [0.235869356622874, -0.2282558699992463, 0.30817514585649114, -0.079921608021807339, -0.23587023904795457, -1.542379670606416], 'effort': [], 'velocities': [0.38972084759666381, 0.42687835399634666, -0.23584975097481392, -0.19102753812819034, -0.38972094979541061, 2.015303484305452], 'positions': [-4.1491506788485, 5.137610354564423, 4.343473328159933, -0.056305995126146438, 2.578354458840773, 0.78539788903802876], 'time_from_start': {'nsecs': 714705567, 'secs': 0}}, {'accelerations': [-0.032510325665105436, -0.47739346085291051, 0.41093747098555627, 0.066453283489006074, 0.032509744647825523, -2.655413474170958], 'effort': [], 'velocities': [0.39624639763765834, 0.40272963994584415, -0.21143301717335206, -0.19129572851675419, -0.39624654887505473, 1.8721173200527619], 'positions': [-4.122681009621914, 5.165550431364343, 4.328430562982933, -0.069203240865204366, 2.5518847808967013, 0.91629764858012719], 'time_from_start': {'nsecs': 781315069, 'secs': 0}}, {'accelerations': [-0.15014063241028489, -0.51698599365376963, 0.38779352997798866, 0.12919008798464449, 0.15014033653933359, -2.7443346807179667], 'effort': [], 'velocities': [0.38920207924927552, 0.36566573943167235, -0.18177924984339494, -0.18388578361720417, -0.38920226248596557, 1.671120315693766], 'positions': [-4.09360969750577, 5.193951551057109, 4.313933358623142, -0.083107097379267539, 2.522813456154496, 1.047197400758243], 'time_from_start': {'nsecs': 854893395, 'secs': 0}}, {'accelerations': [-0.32488679330024584, -0.5733492289045552, 0.36694397600515766, 0.20640328805533764, 0.32488678603912963, -2.8806094378711817], 'effort': [], 'velocities': [0.36829995531994947, 0.31886648682810359, -0.14958898297796119, -0.16927698201314542, -0.36830015052822818, 1.430214824704081], 'positions': [-4.0615127803310305, 5.222869390901032, 4.299988505942443, -0.098080033249282689, 2.4907165226612795, 1.1780971452277538], 'time_from_start': {'nsecs': 938632387, 'secs': 0}}, {'accelerations': [-0.62269215365322106, -0.67520640780078156, 0.3559994165929708, 0.31920549276882193, 0.62269245637142934, -3.1665076551364], 'effort': [], 'velocities': [0.31519285369539418, 0.25107606943581839, -0.11086255485468216, -0.14021317515110532, -0.31519303071194282, 1.1034460689110144], 'positions': [-4.0258623526013535, 5.252374348960617, 4.286603264892619, -0.11419970675463556, 2.4550660752000613, 1.3089968818556093], 'time_from_start': {'nsecs': 39538555, 'secs': 1}}, {'accelerations': [-0.49591396786423297, -0.43697359854819257, 0.20405345341764963, 0.23291945374007664, 0.49591425605943451, -1.9652220948022812], 'effort': [], 'velocities': [0.2281353230436734, 0.16662209266188216, -0.068934282161880855, -0.097687631018712945, -0.22813545308791192, 0.7156789186276733], 'positions': [-3.9859897818302965, 5.282557942929252, 4.273785302999274, -0.13156530318231385, 2.415193481622154, 1.439896610718671], 'time_from_start': {'nsecs': 183439764, 'secs': 1}}, {'accelerations': [-1.0901110883207425, -0.66768523495974974, -0.29893404994847578, 0.96661878590214401, 1.0901115458823993, -3.177222369797786], 'effort': [], 'velocities': [0.057594178224490714, 0.049016831565978261, -0.082137628382226546, 0.033120852395726333, -0.057594228785841958, 0.16731311482079836], 'positions': [-3.941030483454378, 5.3135428450925, 4.261542630274116, -0.15030750470965903, 2.37023415775446, 1.570796332098096], 'time_from_start': {'nsecs': 434345927, 'secs': 1}}, {'accelerations': [-0.99710848709364619, -0.50608311125955108, -1.8419292972962467, 2.34801240609767, 0.9971084944283628, -3.0639234655927923], 'effort': [], 'velocities': [-0.12831163736729626, -0.058100079590776767, -0.23428364188662917, 0.29238372123804057, 0.12831163831651515, -0.38470101009327473], 'positions': [-3.953527195432297, 5.308571771984284, 4.238993365944668, -0.12278716728777644, 2.3827308698253513, 1.534266184988559], 'time_from_start': {'nsecs': 629609053, 'secs': 1}}, {'accelerations': [-0.84226520135679339, -0.73922260601289502, -1.6596512716875864, 2.398873873009649, 0.84226520763445456, -2.981099632007004], 'effort': [], 'velocities': [-0.21610887239049487, -0.11135362666942494, -0.39936203405949389, 0.51071566020021231, 0.21610887398783463, -0.66544259093626201], 'positions': [-3.965610888267007, 5.302879351595438, 4.2168435685218615, -0.094944949501085396, 2.394814562749285, 1.4977360378691011], 'time_from_start': {'nsecs': 692341096, 'secs': 1}}, {'accelerations': [-0.7172656434532847, -0.91554722077743667, -1.4848935563752232, 2.400440770763674, 0.71726564871981824, -2.8575307668851724], 'effort': [], 'velocities': [-0.25580726940248322, -0.15266094209023767, -0.47920353707883667, 0.63186447836515303, 0.25580727129391101, -0.81315795832831828], 'positions': [-3.9773031254436737, 5.296439406370444, 4.195096314002944, -0.06675774978935807, 2.4065068000124445, 1.4612058907415486], 'time_from_start': {'nsecs': 741141343, 'secs': 1}}, {'accelerations': [-0.63528469135300369, -1.1133551429607624, -1.3714320278375565, 2.48478716268578, 0.63528469582355529, -2.8343341147212002], 'effort': [], 'velocities': [-0.28449638990357695, -0.19522043086590682, -0.53970092549271076, 0.7349213552509628, 0.28449639200184451, -0.9334115138360819], 'positions': [-3.988624053440264, 5.2892246766724575, 4.173755956989517, -0.038202663117412099, 2.4178277280927065, 1.4246757436058777], 'time_from_start': {'nsecs': 782759231, 'secs': 1}}, {'accelerations': [-0.50615248133753332, -1.2723145945383556, -1.1504231657471558, 2.422737750764463, 0.50615248458489115, -2.6211182185491455], 'effort': [], 'velocities': [-0.30591877750536078, -0.23957376201532588, -0.58696780198242293, 0.82654156256248723, 0.30591877974882076, -1.035402655453197], 'positions': [-3.999592348727378, 5.281206932982727, 4.152828068921826, -0.0092570314067842874, 2.42879602346056, 1.3881455964620568], 'time_from_start': {'nsecs': 819692993, 'secs': 1}}, {'accelerations': [-0.48818604075889371, -1.5196438476895464, -1.127426160168818, 2.647069996491399, 0.48818604352409495, -2.7596773254085365], 'effort': [], 'velocities': [-0.32279315878261861, -0.28674063661381471, -0.62561090298467015, 0.91235153781034151, 0.32279316112838286, -1.1265478242830191], 'positions': [-4.010225359720131, 5.272357058796407, 4.132319453666596, 0.020101457980613371, 2.4394290345310132, 1.351615449310069], 'time_from_start': {'nsecs': 853463003, 'secs': 1}}, {'accelerations': [-0.33007254663685892, -1.6359197115709612, -0.81734410837917726, 2.4532638076572653, 0.33007254784868262, -2.379682817677918], 'effort': [], 'velocities': [-0.33571850345857757, -0.33618789570137708, -0.65629473891464252, 0.9924826324571594, 0.33571850586759433, -1.2073934481102633], 'positions': [-4.020539231510594, 5.262645160691378, 4.112238165730162, 0.049894643960554548, 2.4497429063960316, 1.3150853021499047], 'time_from_start': {'nsecs': 884649040, 'secs': 1}}, {'accelerations': [-0.36741557528598262, -1.948161474615677, -0.87550592915945424, 2.8236673894052786, 0.36741557629253074, -2.681486162135444], 'effort': [], 'velocities': [-0.3459568840337085, -0.38874557413793742, -0.681158216394115, 1.069903787982097, 0.34595688647543077, -1.2816724748726671], 'positions': [-4.030549015893827, 5.252040709637614, 4.09259353005194, 0.080143730623648379, 2.4597526908505776, 1.2785551549815717], 'time_from_start': {'nsecs': 914027698, 'secs': 1}}, {'accelerations': [-0.27402083189478249, -2.129475428379683, -0.66451553436557054, 2.79399094724466, 0.27402083171236769, -2.493267221844509], 'effort': [], 'velocities': [-0.35489746374493802, -0.44528611770857385, -0.70261856839489401, 1.1479046831392532, 0.35489746619855439, -1.3535849109901343], 'positions': [-4.040268768776204, 5.240512717966369, 4.073396162186369, 0.11086909008421884, 2.4694724438009286, 1.2420250078050874], 'time_from_start': {'nsecs': 941703723, 'secs': 1}}, {'accelerations': [-0.15900435478408992, -2.25458283916507, -0.39597278526116014, 2.6505556082979145, 0.15900435326106269, -2.181641670026221], 'effort': [], 'velocities': [-0.36065001856920914, -0.5031443095769832, -0.71670281069313391, 1.2198471168884015, 0.36065002100070098, -1.415413458091288], 'positions': [-4.049711636709022, 5.228029956685586, 4.054657987502157, 0.14209002596564621, 2.4789153117982923, 1.2054948606204832], 'time_from_start': {'nsecs': 968036511, 'secs': 1}}, {'accelerations': [-0.17421347124343109, -2.556323339719875, -0.37404686902823153, 2.9303701909198816, 0.1742134692249302, -2.3624053111451944], 'effort': [], 'velocities': [-0.36486394503659864, -0.56396311454065762, -0.7264549779665701, 1.2904180886961298, 0.36486394742338779, -1.4728849202977616], 'positions': [-4.05888993400981, 5.214561217967281, 4.03639225781723, 0.17382449427803404, 2.4880936091601122, 1.168964713427803], 'time_from_start': {'nsecs': 993341802, 'secs': 1}}, {'accelerations': [-0.035932862394279501, -2.604725461694051, -0.03518527651203502, 2.639910720488901, 0.035932858888452913, -1.8997233872318318], 'effort': [], 'velocities': [-0.36745568261789369, -0.62688133289399328, -0.73151685149947487, 1.3583981801489426, 0.36745568493764147, -1.524951402485447], 'positions': [-4.067815211704284, 5.200075627591515, 4.018613563648522, 0.20608877872445244, 2.497018886912019, 1.1324345662271063], 'time_from_start': {'nsecs': 17659690, 'secs': 2}}, {'accelerations': [-0.043927439263094691, -2.8772923915036643, 0.022844490079710726, 2.8544478823891373, 0.043927435203027027, -2.016594655678486], 'effort': [], 'velocities': [-0.36839694366948006, -0.69154294671169281, -0.73167274484084144, 1.423215686874421, 0.36839694590001781, -1.5711589549321583], 'positions': [-4.076498319333492, 5.184543011845264, 4.001337839992589, 0.23889711802144425, 2.5057019945949883, 1.0959044190184661], 'time_from_start': {'nsecs': 41262392, 'secs': 2}}, {'accelerations': [0.26823032488279963, -2.452359410447902, 0.72133542992989053, 1.731023964955275, -0.26823033129966617, -0.69953833117366249], 'effort': [], 'velocities': [-0.36585054959056529, -0.75295050532038965, -0.72318564169549293, 1.4761361419390586, 0.36585055170075664, -1.6025805785818816], 'positions': [-4.0849494605150065, 5.167934322768005, 3.9845823632737356, 0.27226128370531716, 2.5141531358265197, 1.0593742718019676], 'time_from_start': {'nsecs': 64170943, 'secs': 2}}, {'accelerations': [0.26009576623990327, -2.573074479131348, 0.78562543832056109, 1.787449025039513, -0.26009577297851705, -0.71359905147979685], 'effort': [], 'velocities': [-0.35985826661339515, -0.8099378798812974, -0.70609860406203162, 1.516036478511153, 0.35985826857440639, -1.6186063843677], 'positions': [-4.093178243017678, 5.150222124625028, 3.968365736812782, 0.30619010819007364, 2.522381918375395, 1.022844124577714], 'time_from_start': {'nsecs': 86852676, 'secs': 2}}, {'accelerations': [0.095640057302308748, -3.110269478030224, 0.55438883015671647, 2.5558806291650935, -0.095640063624403235, -1.470407237055324], 'effort': [], 'velocities': [-0.35585983572531604, -0.87355415668475733, -0.69106936691767096, 1.5646235177842787, 0.35585983753999512, -1.6430070769312441], 'positions': [-4.101193724001687, 5.131381142986162, 3.952707861898557, 0.3406889646171764, 2.5303973994017355, 0.98631397734581883], 'time_from_start': {'nsecs': 109309837, 'secs': 2}}, {'accelerations': [0.4058201881884832, -2.4148494747298077, 1.2426426671464919, 1.1722067941262861, -0.40582019640510275, -4.0344849777621612e-14], 'effort': [], 'velocities': [-0.35032951559219083, -0.93471505222357099, -0.67122751367110334, 1.6059425597203996, 0.35032951724613803, -1.6593550014133578], 'positions': [-4.109004450985143, 5.1113888757063854, 3.9376298913084082, 0.37575920235443799, 2.5382081264235934, 0.94978383010641299], 'time_from_start': {'nsecs': 131324504, 'secs': 2}}, {'accelerations': [0.39006351464244332, -2.445588681704826, 1.2909860664067714, 1.1546026021809606, -0.39006352294886293, -3.0258637327180806e-14], 'effort': [], 'velocities': [-0.34156895837843398, -0.98821551517064177, -0.64333901765108503, 1.6315545263549416, 0.34156895985050661, -1.6593550014133585], 'positions': [-4.116618499022422, 5.090226262374029, 3.9231541619523944, 0.41139754490362307, 2.5458221744952927, 0.91325368285964126], 'time_from_start': {'nsecs': 153339171, 'secs': 2}}, {'accelerations': [0.46040908334794561, -2.17832859890637, 1.4948057271348905, 0.68352286088582537, -0.46040909203360642, 0.43549961718231966], 'effort': [], 'velocities': [-0.33219275422975564, -1.0391823893189749, -0.61262692915357653, 1.6518093117412107, 0.33219275551451216, -1.6545473422235284], 'positions': [-4.124043504515073, 5.067878405368648, 3.9093041032442057, 0.44759546047164939, 2.5532471800183374, 0.87672353560566274], 'time_from_start': {'nsecs': 175353837, 'secs': 2}}, {'accelerations': [0.41659900723341325, -2.229401955057099, 1.4815991588066775, 0.74780278543994505, -0.41659901577133313, 0.31270889352367204], 'effort': [], 'velocities': [-0.3224879972054297, -1.0879647794563623, -0.57968700393551631, 1.667651776420426, 0.32248799829957453, -1.64627021837966], 'positions': [-4.131286696021512, 5.044335331558098, 3.896104117871779, 0.48433851950291412, 2.5604903715511016, 0.84019338834465052], 'time_from_start': {'nsecs': 197496814, 'secs': 2}}, {'accelerations': [0.38568033697753801, -2.2461855010992635, 1.4937265144119831, 0.75245897612746004, -0.38568034543850049, 0.24102125347991904], 'effort': [], 'velocities': [-0.31357076465284217, -1.1377143004592698, -0.54661400093435319, 1.6843282941846303, 0.31357076555803459, -1.6401166258631856], 'positions': [-4.138354922385241, 5.019592778934933, 3.8835794318981725, 0.52160575794199748, 2.567558597937054, 0.8036632410767931], 'time_from_start': {'nsecs': 219733319, 'secs': 2}}, {'accelerations': [0.35498855157422993, -2.266091663623626, 1.5081709148546358, 0.75792073838799168, -0.35498855997904721, 0.158515987944056], 'effort': [], 'velocities': [-0.30531156221651823, -1.1880338607795413, -0.51313772378944877, 1.701171577126476, 0.30531156293363049, -1.6356623835732997], 'positions': [-4.145254678461499, 4.993652987309811, 3.8717559116155646, 0.55936906968627542, 2.5744583540314045, 0.76713309380229222], 'time_from_start': {'nsecs': 242042726, 'secs': 2}}, {'accelerations': [0.3244535493843872, -2.290129986194993, 1.5257949957535168, 0.76433498015486334, -0.32445355774898776, 0.064440518614025499], 'effort': [], 'velocities': [-0.29771885416119037, -1.2389511997344003, -0.47923210083682111, 1.7181832928977412, 0.2977188546908997, -1.6331715787649266], 'positions': [-4.151992128688192, 4.966525466818287, 3.8606598453458982, 0.59759265627847602, 2.5811958042720318, 0.73060294652136459], 'time_from_start': {'nsecs': 264400471, 'secs': 2}}, {'accelerations': [0.29398529786778727, -2.319431389539052, 1.54757088375516, 0.77186049549982427, -0.29398530622849572, -0.04212787733604318], 'effort': [], 'velocities': [-0.29080185096132116, -1.290507608734227, -0.44485752499604808, 1.7353651258267189, 0.29080185130396363, -1.6329221103983478], 'positions': [-4.158573128717506, 4.938227712855393, 3.8503176894637856, 0.63623256594919519, 2.587776804311106, 0.6940727992342407], 'time_from_start': {'nsecs': 286777957, 'secs': 2}}, {'accelerations': [0.74035915490215598, 0.035291997489688795, 2.2150083992674188, -2.2503003928100873, -0.74035916323099948, 2.643359800564916], 'effort': [], 'velocities': [-0.27907602849900515, -1.3160494414107302, -0.40230397661833095, 1.718353410055454, 0.2790760286532098, -1.6032684883804027], 'positions': [-4.165003245299321, 4.908785831648963, 3.840755779325646, 0.67523635711443242, 2.594206920898493, 0.65754265194116379], 'time_from_start': {'nsecs': 309142532, 'secs': 2}}, {'accelerations': [0.64910569975422039, 0.084464144476052119, 2.02104361667356, -2.105507757274732, -0.64910570721900107, 2.337370907256757], 'effort': [], 'velocities': [-0.26296490673105244, -1.3146487104629652, -0.35316818787754695, 1.6678168904576955, 0.26296490670209, -1.5455114300097321], 'positions': [-4.171287774585479, 4.878235037636411, 3.8320000075105396, 0.71454292275797882, 2.6004914501860275, 0.62101250464239244], 'time_from_start': {'nsecs': 332363646, 'secs': 2}}, {'accelerations': [0.56895278441328967, 0.12390905050382053, 1.849893649797682, -1.9738026965790205, -0.56895279113679076, 2.058383017166016], 'effort': [], 'velocities': [-0.24832731848924985, -1.3121335505204716, -0.30663309969653191, 1.6187666424255585, 0.24832731828974453, -1.492684861431835], 'positions': [-4.177431759004955, 4.846619982789, 3.8240754737636413, 0.75408251116367864, 2.606635434602683, 0.58448235733819676], 'time_from_start': {'nsecs': 356430216, 'secs': 2}}, {'accelerations': [0.58511353267666311, 0.66277635404424518, 1.7848691120664635, -2.447645459632348, -0.58511353856620985, 2.348558641093875], 'effort': [], 'velocities': [-0.23392638775939528, -1.3021927757662053, -0.26130425430975712, 1.563497022412422, 0.23392638740273672, -1.4376394204336056], 'positions': [-4.183440002843285, 4.813994879673531, 3.817006113190047, 0.79377697465992481, 2.6126436784339977, 0.54795221002886052], 'time_from_start': {'nsecs': 381323152, 'secs': 2}}, {'accelerations': [0.50638846745212396, 0.65536518275669342, 1.6037819183516344, -2.259147095121441, -0.50638847266396192, 2.0441543697600366], 'effort': [], 'velocities': [-0.21978803822163012, -1.285095806980424, -0.21739410771729276, 1.5024899071957467, 0.21978803772114186, -1.3807368596815808], 'positions': [-4.189317086645107, 4.780423384864677, 3.810814311436927, 0.83354027102517669, 2.6185207622246227, 0.51142206271467994], 'time_from_start': {'nsecs': 407271760, 'secs': 2}}, {'accelerations': [0.50837202723267971, 1.090498321114353, 1.4962426139653635, -2.586740927011713, -0.5083720316041539, 2.2324351579229536], 'effort': [], 'velocities': [-0.2060635821552948, -1.2613578205134592, -0.17549984536331273, 1.436857658565489, 0.20606358152544368, -1.3228444441729679], 'positions': [-4.195067380545957, 4.745978217585418, 3.805520517646672, 0.87327923189438239, 2.6242710561101057, 0.47489191539596293], 'time_from_start': {'nsecs': 434257460, 'secs': 2}}, {'accelerations': [0.43518006136435577, 1.031067985867069, 1.3211636064352255, -2.352231585004788, -0.43518006516428648, 1.9232754211672771], 'effort': [], 'velocities': [-0.19274997729595036, -1.2313886862314622, -0.13573208096291309, 1.3671207601000361, 0.19274997655078002, -1.2642027698274834], 'positions': [-4.200695056628259, 4.710740500065281, 3.801142867654725, 0.91289459920289862, 2.6298987321728915, 0.43836176807303034], 'time_from_start': {'nsecs': 462531491, 'secs': 2}}, {'accelerations': [0.42847987199207987, 1.3549415884550464, 1.193150294668763, -2.548091874358692, -0.4284798750143663, 2.0337118192096875], 'effort': [], 'velocities': [-0.17996353423581102, -1.1959431384698802, -0.098546068007484861, 1.294489199621394, 0.17996353338989377, -1.2055699752760578], 'positions': [-4.2062041003866595, 4.674798820536328, 3.7976968310274786, 0.95228231515260897, 2.6354077759076526, 0.40183162074621354], 'time_from_start': {'nsecs': 492077016, 'secs': 2}}, {'accelerations': [0.41163098984873486, 1.5930319131690795, 1.0451380519644933, -2.638169955358099, -0.41163099211392551, 2.0743959700671595], 'effort': [], 'velocities': [-0.1668756089117483, -1.1498903520003485, -0.063720225873136194, 1.213610571306944, 0.16687560798373641, -1.1415180169358017], 'positions': [-4.211598321379173, 4.638248036049318, 3.795194895892449, 0.99133503456558414, 2.640801996872436, 0.36530147341585523], 'time_from_start': {'nsecs': 523173439, 'secs': 2}}, {'accelerations': [0.37066652724141308, 1.6251107328554966, 0.88708270275248291, -2.512193425948657, -0.37066652892199309, 1.9380919617118413], 'effort': [], 'velocities': [-0.15398186135743852, -1.0967502634177206, -0.031901628910879956, 1.1286518860828272, 0.15398186036457939, -1.075348178852435], 'positions': [-4.2168813631329725, 4.6011878490037565, 3.7936463049614964, 1.0299438123308213, 2.6460850385944523, 0.32877132608230825], 'time_from_start': {'nsecs': 556134018, 'secs': 2}}, {'accelerations': [0.39221569492852215, 2.0783332326285167, 0.72805337167267026, -2.80638659229938, -0.39221569558923169, 2.2382989140429244], 'effort': [], 'velocities': [-0.14051507753647247, -1.0311543862739132, -0.0035200522912945268, 1.0346744327029034, 0.14051507650297157, -1.0015089830079895], 'positions': [-4.222056712366875, 4.563721206810262, 3.793056854626026, 1.067999904646662, 2.6512603877925596, 0.29224117874593547], 'time_from_start': {'nsecs': 591178347, 'secs': 2}}, {'accelerations': [0.39345159864624796, 2.3701242221164485, 0.54100405329843848, -2.911128261925307, -0.39345159833138382, 2.4050641501241103], 'effort': [], 'velocities': [-0.12545099611276889, -0.94560387364964171, 0.020641432277199234, 0.92496243600020933, 0.12545099507351945, -0.9123347493791889], 'positions': [-4.227127707586571, 4.525952586770388, 3.793428766551665, 1.105396612546305, 2.656331382972495, 0.25571103140710966], 'time_from_start': {'nsecs': 629206035, 'secs': 2}}, {'accelerations': [-0.30376345779706754, -2.883818494653347, 0.73565603673587632, 2.1481624414367912, 0.30376345198486993, -2.7134995193407683], 'effort': [], 'velocities': [-0.123615455635637, -0.95558540687556037, 0.046187556708021854, 0.9093978447371498, 0.12361545448668931, -0.91821501072340239], 'positions': [-4.232097547103317, 4.487986236613587, 3.794760637968692, 1.1420310910704028, 2.6613012224455708, 0.21918088406621256], 'time_from_start': {'nsecs': 671483863, 'secs': 2}}, {'accelerations': [0.16419335255963899, 0.78133972515966688, 0.59446396293277148, -1.3758036838613479, -0.16419335415460837, 0.74778097846181946], 'effort': [], 'velocities': [-0.12654821925848067, -0.99825214965355191, 0.072207301971376855, 0.9260448420034858, 0.12654821796310112, -0.95812183486362579], 'positions': [-4.236969296522065, 4.449924444176034, 3.7970474730921806, 1.1778060481681003, 2.666172971816797, 0.18265073672363338], 'time_from_start': {'nsecs': 709051623, 'secs': 2}}, {'accelerations': [0.38828933466248089, 2.737754455619127, 0.29297191761689956, -3.0307263578931987, -0.38828933311836755, 2.5759721343673005], 'effort': [], 'velocities': [-0.11542817651236045, -0.92702306579704863, 0.089570381138790012, 0.83745267937593337, 0.11542817521833955, -0.89086139593887381], 'positions': [-4.241745895740735, 4.411865907073765, 3.8002807941309356, 1.2126312640149555, 2.670949570984155, 0.14612058937977021], 'time_from_start': {'nsecs': 747754412, 'secs': 2}}, {'accelerations': [0.3864597483195677, 2.911193661065737, 0.063124375203697985, -2.9743180198754304, -0.38645974569253078, 2.7292387840628507], 'effort': [], 'velocities': [-0.098241230101254157, -0.80140632014209234, 0.097100787576037448, 0.70430552798959134, 0.098241228901527297, -0.77290390747378712], 'positions': [-4.246430165498561, 4.373904265241742, 3.8044488265042764, 1.2464248732570955, 2.6756338406869475, 0.10959044203502791], 'time_from_start': {'nsecs': 791353790, 'secs': 2}}, {'accelerations': [0.33426136697344433, 2.62857205826194, -0.10514535674853782, -2.523426686633235, -0.33426136394669193, 2.4739869438720077], 'effort': [], 'velocities': [-0.079319064702156675, -0.65564875203014217, 0.095544201918605298, 0.56010454635814866, 0.079319063653008545, -0.63597409749759803], 'positions': [-4.251024813508028, 4.336126846848321, 3.809536749509632, 1.2791143684291477, 2.680228488637735, 0.073060294689817742], 'time_from_start': {'nsecs': 842953801, 'secs': 2}}, {'accelerations': [0.37348490488511593, 3.087326613157658, -0.43978827256213132, -2.6475383229271827, -0.37348489999179552, 2.987813690278009], 'effort': [], 'velocities': [-0.048797468194780397, -0.40726261326867491, 0.067996118431175229, 0.33926649250085522, 0.048797467506167314, -0.39762649103798769], 'positions': [-4.25553244020186, 4.298613662790826, 3.8155270010391247, 1.310637300742083, 2.6847361152693177, 0.036530147344557361], 'time_from_start': {'nsecs': 907723594, 'secs': 2}}, {'accelerations': [0.35451115118901, 2.97973082026715, -0.55083969047703252, -2.428891112662364, -0.35451114592036126, 2.927886121850893], 'effort': [], 'velocities': [0.0, 0.0, 0.0, 0.0, 0.0, 0.0], 'positions': [-4.259955544123728, 4.261436668405658, 3.8223996232037525, 1.3409416727489272, 2.6891592191254503, -3.3082180251513618e-13], 'time_from_start': {'nsecs': 65689593, 'secs': 3}}]}}}
    
    get_cartesian_path = GetCartesianPathResponse.from_msg(msg)
    print(get_cartesian_path.start_state.joint_state.position)

    print(get_cartesian_path.solution.joint_trajectory.joint_names)
    for point in get_cartesian_path.solution.joint_trajectory.points:
        print(point.positions)
